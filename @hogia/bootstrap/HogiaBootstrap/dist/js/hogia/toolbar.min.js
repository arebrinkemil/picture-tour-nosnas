var HogiaBootstrap=HogiaBootstrap||{};HogiaBootstrap.Toolbar=function(){function r(t){var i,r;n.viewModel.isSelectOrganizationVisible(t.isSelectOrganizationVisible);n.viewModel.isSelectOrganizationPossible(t.isSelectOrganizationPossible);n.viewModel.organizations(t.organizations);i=new HogiaBootstrap.OrganizationModel;t.isSelectOrganizationVisible&&(t.organizations&&t.selectedOrganizationId?(r=$.grep(t.organizations,function(n){return n.id==t.selectedOrganizationId}),r.length==1&&(i=r[0])):i=t.organizations[0],t.changeOrganizationCallback(i.id));n.viewModel.selectedOrganization(i)}function u(t){var i=s(t);n.viewModel.addUserLink(i)}function f(t){n.viewModel.navigated();n.viewModel.breadcrumbs(t)}function e(){var n="";return n+='<div id="mobile-menu-overlay"><\/div>',n+='<nav class="hogia-toolbar navbar navbar-fixed-top" role="navigation">',n+='    <div class="navbar-header">',n+='        <span class="helper"><\/span>',n+='        <div class="vertical-aligner">',n+='        <div class="table_pos">',n+='           <div class=""><button type="button" class="btn btn-link toggle-button pull-left visible-xs" id="Toolbar_openMobileMenu"><i class="fa fa-lg fa-bars"><\/i><\/button><\/div>',n+='           <div><a href="#" target="_blank" data-bind="attr: { \'href\': getSelectedEnvironmentUrl }" id="Toolbar__hogiaLink" class=""><img class="navbar-image hidden-xs" id="Toolbar__hogiaLogo" data-bind="attr: { \'src\': hogiaLogoUrl }" alt="Hogia" /><\/a>',n+='           <a href="#" id="Toolbar__homeLink" data-bind="alt: applicationName"><img class="navbar-application-image" id="Toolbar__applicationImage" data-bind="attr: { \'src\': applicationImageUrl, \'alt\': applicationImageAltText }" />',n+='           <span class="navbar-brand hidden-xs" id="Toolbar__applicationName" data-bind="text: applicationName"><\/span><\/a><\/div>',n+="       <\/div>",n+="   <\/div>",n+='        <ul class="nav navbar-nav navbar-right navbar-user hidden-xs">',n+='            <li class="dropdown"  data-bind="visible: isSelectOrganizationVisible">',n+='                <a href="#" id="Toolbar__orgMenu"class="dropdown-toggle" data-toggle="dropdown" data-bind="visible: isSelectOrganizationPossible">',n+='                   <i class="fa fa-lg fa-sitemap"><\/i>',n+='                   <span data-bind="text: selectedOrganization().name"><\/span><b class="caret"><\/b>',n+="                <\/a>",n+='                <span class="select-organization-possible" data-bind="visible: !isSelectOrganizationPossible(), text: selectedOrganization().name"><\/span>',n+='                <ul class="dropdown-menu hogia-toolbar-organizations" data-bind="visible: isSelectOrganizationPossible, foreach: organizations">',n+="                    <li><a href=\"#\" data-bind=\"click: $parent.setSelectOrganization, text: name, attr: { 'data-option': id, 'id': 'Toolbar__orgMenu__'+$index() }\"><\/a><\/li>",n+='               <b class="notch"><\/b> <\/ul>',n+="            <\/li>",n+="            <!-- ko foreach: userLinks -->",n+='            <li class="dropdown" data-bind="css: { open: childIsActive }">',n+='                <a href="#" id="Toolbar__userLinks" class="dropdown-toggle" data-bind="css: { }, attr: { \'data-toggle\': isDropDown ? \'dropdown\' : \'\' }">',n+="                    <i data-bind=\"if: hasIcon, attr: { 'class': icon }\"><\/i>",n+='                    <span data-bind="text: name"><\/span>',n+='                    <b class="caret" data-bind="visible: isDropDown"><\/b>',n+="                <\/a>",n+='                <ul class="dropdown-menu hogia-toolbar-user-links" data-bind="visible: isDropDown">',n+='                    <li><div class="nameContent"><h4 data-bind="text: name"><\/h4><h5 data-bind="text: email"><\/h5><\/div><\/li>',n+="                    <!-- ko foreach: children -->",n+="                    <li>",n+="                        <a href=\"#\" data-bind=\"css: { active: isActive }, click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu($data) }, attr: {'id': 'Toolbar__userLinks__'+$index()}\">",n+="                            <i data-bind=\"if: hasIcon, attr: { 'class': icon }\"><\/i>",n+='                            <span data-bind="text: name"><\/span>',n+="                        <\/a>",n+="                        ",n+="                    <\/li>",n+="                   <!-- /ko -->",n+='                <b class="notch"><\/b>',n+="                <\/ul>",n+="            <\/li>",n+="            <!-- /ko -->",n+="        <\/ul>",n+="    <\/div>",n+='    <div class="collapse navbar-collapse navbar-submenu">',n+='        <ul class="nav navbar-nav" data-bind="foreach: systemLinks">',n+='            <li class="dropdown wide" data-bind="css: { open: childIsActive }">',n+="                <a href=\"#\" class=\"dropdown-toggle\" data-bind=\"css: { active: isActive, 'drop-down': isDropDown, 'child-active': childIsActive,  'subnav-visible': isSubNavVisible}, attr: { 'data-toggle': isDropDown ? 'dropdown' : '','id': 'Toolbar__menu__'+ $index() }, click: function (data, e) { $root.navigate(id(), e.target) }\">",n+='                    <span data-bind="text: name" class="uppercase"><\/span>',n+='                    <b class="caret" data-bind="visible: isDropDown"><\/b>',n+="                <\/a>",n+='                <div class="sub-menu"><\/div>',n+='                <ul class="dropdown-menu hogia-toolbar-system-links" data-bind="visible: isDropDown, foreach: children">',n+="                    <li>",n+="                        <a href=\"#\" data-bind=\"text: name, css: { 'active': isActive, 'subnav-visible': $parent.isActive }, click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu($data) }, attr: {'id': 'Toolbar__menu__'+ $parentContext.$index() + '__' + $index()}\"><\/a>",n+="                    <\/li>",n+="                <\/ul>",n+="            <\/li>",n+="        <\/ul>",n+='        <ul class="nav navbar-nav navbar-right" data-bind="foreach: staticLinks">',n+='            <li class="dropdown wide" data-bind="css: { open: childIsActive }">',n+="                <a href=\"#\" class=\"dropdown-toggle\" data-bind=\"css: { active: isActive, 'drop-down': isDropDown, 'child-active': childIsActive, 'subnav-visible': isSubNavVisible }, attr: { 'data-toggle': isDropDown ? 'dropdown' : '','id': 'Toolbar__menu__'+ $index() }, click: function (data, e) { $root.navigate(id(), e.target) }\">",n+="                    <i data-bind=\"if: true, attr: { 'class': icon }\"><\/i>",n+='                    <span data-bind="text: name" class="uppercase"><\/span>',n+='                    <b class="caret" data-bind="visible: isDropDown"><\/b>',n+="                <\/a>",n+='                <div class="sub-menu"><\/div>',n+='                <ul class="dropdown-menu hogia-toolbar-system-links" data-bind="visible: isDropDown, foreach: children">',n+="                    <li>",n+="                        <a href=\"#\" data-bind=\"text: name, css: { active: isActive }, click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu($data) }, attr: {'id': 'Toolbar__menu__'+ $parentContext.$index() + '__' + $index()}\"><\/a>",n+="                    <\/li>",n+="                <\/ul>",n+="            <\/li>",n+="        <\/ul>",n+="    <\/div>",n+='    <div class="navbar-breadcrumb" data-bind="visible: breadcrumbs()">',n+='        <ol class="breadcrumb" data-bind="foreach: breadcrumbs">',n+='            <li class="wide" data-bind="css: { active: isActive }">',n+="                <a data-bind=\"attr: {href: url, 'id': 'Toolbar__breadcrumb__'+ $index()}\">",n+='                    <span data-bind="text: name">-<\/span>',n+="                <\/a>",n+="            <\/li>",n+="        <\/ol>",n+="    <\/div>",n+="",n+="    <\/nav>",n+='    <div class="hogia-toolbar" id="menu">',n+='       <div class="navbar-header left-menu">',n+='               <div class="vertical-aligner">',n+='                   <div class="table_pos">',n+='                       <div><a href="#" id="Toolbar__homeLink"><img class="navbar-image pull-left" id="Toolbar__hogiaLogo" data-bind="attr: { \'src\': hogiaLogoUrl }" alt="Hogia" /><\/a><\/div>',n+='                       <div class="pull-right"><button type="button" class="btn btn-link toggle-button" id="Toolbar_closeMobileMenu"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x fa-inverse"><\/i><i class="fa fa-bars fa-stack-1x"><\/i><\/span><\/i><\/button><\/div>',n+="                   <\/div>",n+='                   <div class="nameContent"><a href="#" data-bind="click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu(userLinks()[0].children()[0]) }"><h4 data-bind="text: username"><\/h4><h5 data-bind="text: email"><\/h5><\/a><\/div>',n+="               <\/div>",n+="       <\/div>",n+='        <ul class="" data-bind="foreach: systemLinks">',n+='            <li class="dropdown wide" data-bind="css: { open: childIsActive }">',n+="                <a href=\"#\" class=\"dropdown-toggle\" data-bind=\"css: { active: isActive, 'drop-down': isDropDown, 'child-active': childIsActive }, attr: { 'data-toggle': isDropDown ? 'dropdown' : '','id': 'Toolbar__menu__'+ $index() }, click: function (data, e) { $root.navigate(id(), e.target) }\">",n+="                    <i data-bind=\"if: true, attr: { 'class': icon }\"><\/i>",n+='                    <div class="icon-placeholder" data-bind="visible: !icon()"><\/div>',n+='                    <span data-bind="text: name" class="uppercase"><\/span>',n+='                    <b class="caret" data-bind="visible: isDropDown"><\/b>',n+="                <\/a>",n+='                <div class="sub-menu"><\/div>',n+='                <ul class="dropdown-menu hogia-toolbar-system-links" data-bind="visible: isDropDown, foreach: children">',n+="                    <li>",n+="                        <a href=\"#\" data-bind=\"text: name, css: { active: isActive }, click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu($data) }, attr: {'id': 'Toolbar__menu__'+ $parentContext.$index() + '__' + $index()}\"><\/a>",n+="                    <\/li>",n+="                <\/ul>",n+="            <\/li>",n+="        <\/ul>",n+='        <hr data-bind="visible: staticLinks().length > 0"><\/hr>',n+='        <ul class="" data-bind="foreach: staticLinks">',n+='            <li class="dropdown wide" data-bind="css: { open: childIsActive }">',n+="                <a href=\"#\" class=\"dropdown-toggle\" data-bind=\"css: { active: isActive, 'drop-down': isDropDown, 'child-active': childIsActive }, attr: { 'data-toggle': isDropDown ? 'dropdown' : '','id': 'Toolbar__menu__'+ $index() }, click: function (data, e) { $root.navigate(id(), e.target) }\">",n+="                    <i data-bind=\"if: true, attr: { 'class': icon }\"><\/i>",n+='                    <span data-bind="text: name" class="uppercase"><\/span>',n+='                    <b class="caret" data-bind="visible: isDropDown"><\/b>',n+="                <\/a>",n+='                <div class="sub-menu"><\/div>',n+='                <ul class="dropdown-menu hogia-toolbar-system-links" data-bind="visible: isDropDown, foreach: children">',n+="                    <li>",n+="                        <a href=\"#\" data-bind=\"text: name, css: { active: isActive }, click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu($data) }, attr: {'id': 'Toolbar__menu__'+ $parentContext.$index() + '__' + $index()}\"><\/a>",n+="                    <\/li>",n+="                <\/ul>",n+="            <\/li>",n+="        <\/ul>",n+="        <ul>",n+='        <hr data-bind="visible: isSelectOrganizationVisible"/>',n+='            <li class="dropdown"  data-bind="visible: isSelectOrganizationVisible">',n+='                <a href="#" id="Toolbar__orgMenu"class="dropdown-toggle drop-down" data-toggle="dropdown" data-bind="visible: isSelectOrganizationPossible">',n+='                   <i class="fa fa-lg fa-sitemap"><\/i>',n+='                   <span data-bind="text: selectedOrganization().name"><\/span><b class="caret"><\/b>',n+="                <\/a>",n+='                <span class="select-organization-possible" data-bind="visible: !isSelectOrganizationPossible(), text: selectedOrganization().name"><\/span>',n+='                <ul class="dropdown-menu hogia-toolbar-organizations" data-bind="visible: isSelectOrganizationPossible, foreach: organizations">',n+="                    <li><a href=\"#\" data-bind=\"click: $parent.setSelectOrganization, text: name, attr: { 'data-option': id, 'id': 'Toolbar__orgMenu__'+$index() }\"><\/a><\/li>",n+='               <b class="notch"><\/b> <\/ul>',n+="            <\/li>",n+="        <\/ul>",n+="        <hr />",n+='        <ul class="">',n+="            <!-- ko with: userLinks()[0].children()[3] -->",n+='                    <li class="dropdown wide">',n+='                        <a href="#"class="dropdown-toggle" data-bind="css: { active: isActive }, click: function (data, e) { e.stopPropagation(); $root.navigateSubMenu($data) }">',n+="                            <i data-bind=\"if: hasIcon, attr: { 'class': icon }\"><\/i>",n+='                            <span class="uppercase" data-bind="text: name"><\/span>',n+="                        <\/a>",n+="                        ",n+="                    <\/li>",n+="            <!-- /ko -->",n+="        <\/ul>",n+"    <\/div>"}function o(n,t,i){var r=$("#"+t);$.get(n,function(n){r.html(n);i(r)})}function s(t){function r(){if(!c())return"";var n=location.href.indexOf("?"),t=n>0;return t?location.href.substring(n):""}function c(){return window.location.href.indexOf(i)!==-1}var i=t.getSelectedEnvironmentUrl()+"#",u=new HogiaBootstrap.MenuModel({name:t.username,email:t.email,navigateCallback:"/#/",icon:"fa fa-lg fa-user",subMenuAlignRight:!0}),f=function(n){window.open(n)},e,o,s,h;return t.openUserLinksInNewTab||(f=function(n){window.location.href=n}),e=new HogiaBootstrap.MenuModel({name:n.languageRepository.getString("myHogiaID"),navigateCallback:function(){f(i+r())},icon:"fa fa-fw fa-user",isOpeningInNewTab:t.openUserLinksInNewTab}),e.setUrl(i+r()),o=new HogiaBootstrap.MenuModel({name:n.languageRepository.getString("changePassword"),navigateCallback:function(){f(i+"changepassword"+r())},icon:"fa fa-fw fa-unlock",isOpeningInNewTab:t.openUserLinksInNewTab}),o.setUrl(i+"changepassword"+r()),s=new HogiaBootstrap.MenuModel({name:n.languageRepository.getString("changeEmail"),navigateCallback:function(){f(i+"changeemail"+r())},icon:"fa fa-fw fa-envelope",isOpeningInNewTab:t.openUserLinksInNewTab}),s.setUrl(i+"changeemail"+r()),h=new HogiaBootstrap.MenuModel({name:n.languageRepository.getString("logout"),navigateCallback:t.logoutCallback,icon:"fa fa-fw fa-sign-out"}),u.addChildren(e),u.addChildren(o),u.addChildren(s),u.addChildren(h),u}function h(t,i){var h=i||!1,f=new HogiaBootstrap.Settings,s,l;if($.extend(f,t),n.validator.validate(f),!h&&(s=document.getElementById(t.toolbarId),!s))throw"Cannot insert toolbar, missing div with id '"+t.toolbarId+"'";n.languageRepository.initialize();n.languageRepository.setCulture(f.culture);n.viewModel=new HogiaBootstrap.ToolbarViewModel(f.applicationImageUrl,f.hogiaLogoUrl,f.applicationName,f.applicationImageWidth,f.changeOrganizationCallback);r(f);u(f);n.viewModel.setSystemLinks(f.systemLinks);n.viewModel.setStaticLinks(f.staticLinks);n.viewModel.breadcrumbs(t.breadcrumbs);n.viewModel.username=t.username;n.viewModel.email=t.email;n.viewModel.getSelectedEnvironmentUrl=t.getSelectedEnvironmentUrl();h||(s.innerHTML=e(),ko.applyBindings(n.viewModel,s));h&&o("/HogiaBootstrap3/Content/hogia/toolbar-template.html",t.toolbarId,function(t){ko.applyBindings(n.viewModel,t[0])});c(t.toolbarId);this.navigated(t.breadcrumbs);document.addEventListener("click",function(t){t.target.classList&&(t.target.classList.contains("dropdown")&&t.target.classList.contains("wide")||t.target.classList.contains("dropdown-toggle"))||t.target.offsetParent&&t.target.offsetParent.classList&&(t.target.offsetParent.classList.contains("dropdown-toggle")||t.target.offsetParent.classList.contains("drop-down"))||(n.viewModel.staticLinks().forEach(function(n){n.isDropDown||n.isSubNavVisible(!1)}),n.viewModel.systemLinks().forEach(function(n){n.isDropDown||n.isSubNavVisible(!1)}))});l=0;$(".navbar-submenu li.dropdown.wide.open").find("a.active.child-active").parent("li").children("ul").children("li").each(function(){l+=$(this).width()});$(".navbar-submenu li.dropdown.wide.open").find("a.active.child-active").parent("li").children("div.yellow-marker").css({width:l+"px","z-index":1e5});var a=t.getSelectedEnvironmentUrl()+"app/images/480.jpg",v=document.querySelector("#menu > .left-menu"),y=document.querySelector("#toolbar .hogia-toolbar-user-links li:first-child");v.style.background=y.style.background="url("+a+") 50% 50%/cover no-repeat";HogiaBootstrapScrollHandler.ScrollHandler().initialize(Slideout);HogiaBootstrapSlideoutHandler.SlideoutHandler().initialize(Slideout)}function c(){$(function(){setTimeout(function(){i();t()},300);$(window).resize(function(){i();t()})})}function t(n){var i=document.querySelector("#toolbar"),r=i.querySelector(".navbar-collapse"),u=window.getComputedStyle(r,null).display==="none",f,t;return n&&(f=window.getComputedStyle(n,null).display!=="none"),t=5,u||(t=t+parseInt(window.getComputedStyle(r,null).height,10)),u&&(t=parseInt(window.getComputedStyle(i.querySelector(".navbar-header"),null).height,10)),f&&(t=t+parseInt(window.getComputedStyle(n,null).height,10)),t}function i(){$(".hogia-toolbar-system-links").each(function(){var n=$(window).width()-$(this).parent().offset().left;$(this).css({"min-width":n+"px"})})}function l(){var t=n.viewModel.selectedOrganization();return t.id}var n=this;return n.languageRepository=new HogiaBootstrap.LanguageRepository,n.validator=new HogiaBootstrap.SettingsValidator,n.viewModel=null,{initialize:h,navigated:f,selectedOrganizationId:l}};HogiaBootstrap.Settings=function(){function t(n){return typeof n.navigateCallback=="undefined"?!1:typeof n.icon=="undefined"?!1:!0}function i(i){if(typeof i=="undefined")throw"menuModel cannot be undefined";if(typeof i.name=="undefined")throw"menuModel.name cannot be undefined";if(!t(i))throw"menuModel must be of type HogiaBootstrap.MenuModel";n.systemLinks.push(i)}function r(i){if(typeof i=="undefined")throw"menuModel cannot be undefined";if(!t(i))throw"menuModel must be of type HogiaBootstrap.MenuModel";i.name="Rapporter";i.icon="fa fa-bar-chart fa-fw";n.staticLinks.push(i)}function u(i){if(typeof i=="undefined")throw"menuModel cannot be undefined";if(!t(i))throw"menuModel must be of type HogiaBootstrap.MenuModel";i.name="Inställningar";i.icon="fa fa-cog fa-fw";n.staticLinks.push(i)}function f(i){if(typeof i=="undefined")throw"menuModel cannot be undefined";if(!t(i))throw"menuModel must be of type HogiaBootstrap.MenuModel";i.name="Hjälp";i.icon="fa fa-question-circle fa-fw";n.staticLinks.push(i)}function e(){return this.environments[this.environment]}var n=this;return n.applicationImageUrl="",n.applicationImageWidth=undefined,n.hogiaLogoUrl="Content/hogia/images/hogia.png",n.applicationName="This is my app",n.culture="sv-SE",n.toolbarId="toolbar",n.openUserLinksInNewTab=!0,n.environments={},n.environments.production="https://my.hogia.se/",n.environments.development="https://mydev.hogia.se/",n.environments.test="https://mytest.hogia.se/",n.environments.test2="https://mytest2.hogia.se/",n.environments.qualityassurance="https://myqa.hogia.se/",n.environments.local="https://mytest.hogia.se/",n.environment="production",n.username="",n.email="",n.logoutCallback=function(){},n.organizations=[],n.changeOrganizationCallback=function(){},n.isSelectOrganizationVisible=!0,n.isSelectOrganizationPossible=!0,n.systemLinks=[],n.staticLinks=[],n.breadcrumbs=[],{applicationImageUrl:n.applicationImageUrl,applicationImageWidth:n.applicationImageWidth,hogiaLogoUrl:n.hogiaLogoUrl,culture:n.culture,username:n.username,email:n.email,environment:n.environment,environments:n.environments,toolbarId:n.toolbarId,logoutCallback:n.logoutCallback,organizations:n.organizations,changeOrganizationCallback:n.changeOrganizationCallback,isSelectOrganizationVisible:n.isSelectOrganizationVisible,isSelectOrganizationPossible:n.isSelectOrganizationPossible,systemLinks:n.systemLinks,staticLinks:n.staticLinks,breadcrumbs:n.breadcrumbs,openUserLinksInNewTab:n.openUserLinksInNewTab,getSelectedEnvironmentUrl:e,addLink:i,addReportLink:r,addSettingsLink:u,addHelpLink:f}};HogiaBootstrap.SettingsValidator=function(){function n(n){if(typeof n.applicationImageUrl=="undefined")throw"Invalid applicationImageUrl cannot be undefined";if(n.applicationImageUrl.length==0)throw"Invalid applicationImageUrl cannot be empty";}function t(n){if(typeof n.culture=="undefined")throw"Invalid culture cannot be undefined";}function i(n){if(typeof n.environment=="undefined")throw"Invalid environment cannot be undefined";if(n.environment!="production"&&n.environment!="development"&&n.environment!="test"&&n.environment!="test2"&&n.environment!="qualityassurance"&&n.environment!="local")throw"Invalid environment expected development, test, test2, qualityassurance, production or local";}function r(n){if(typeof n.logoutCallback=="undefined")throw"Invalid logoutCallback cannot be undefined";}function u(n){if(typeof n.changeOrganizationCallback=="undefined")throw"Invalid changeOrganizationCallback cannot be undefined";}function f(n){if(typeof n.organizations=="undefined"){n.organizations=[];n.isSelectOrganizationVisible=!1;return}if(!$.isArray(n.organizations)){var t=[];t.push(n.organizations);n.organizations=t}if(n.organizations.length===1){n.isSelectOrganizationPossible=!1;return}if(n.organizations.length==0){n.isSelectOrganizationVisible=!1;return}$.each(n.organizations,function(n,t){e(t,n)})}function e(n,t){if(typeof n=="undefined")throw"Invalid organization cannot be undefined at index "+t;if(typeof n.name=="undefined")throw"Invalid organization name cannot be undefined at index "+t;if(typeof n.id=="undefined")throw"Invalid organization id cannot be undefined at index "+t;}function o(n){if(typeof n.username=="undefined")throw"Invalid username cannot be undefined";}function s(e){if(typeof e=="undefined")throw"Toolbar settings cannot be undefined";n(e);t(e);i(e);r(e);u(e);f(e);o(e)}return{validate:s}};HogiaBootstrap.LanguageRepository=function(){function t(t){var i=n.languages[t];if(typeof i=="undefined")throw"Culture not supported '"+t+"'";n.culture=t;n.currentLanguage=i}function i(t){var i=n.currentLanguage[t];if(typeof i=="undefined")throw"No language string exist with key '"+t+"'";return i}function r(){var i=[],t;i.myHogiaID="My HogiaID";i.changeEmail="Change email";i.changePassword="Change password";i.logout="Log out";n.languages.en=i;t=[];t.myHogiaID="Mitt HogiaID";t.changeEmail="Ändra e-postadress";t.changePassword="Ändra lösenord";t.logout="Logga ut";n.languages["sv-SE"]=t;n.currentLanguage=t}var n=this;return n.culture="sv-SE",n.languages=[],n.currentLanguage=[],{initialize:r,setCulture:t,getString:i}};HogiaBootstrap.ToolbarViewModel=function(n,t,i,r,u){function s(){f.isMobileNavVisible(!0)}function h(){f.isMobileNavVisible(!1)}function a(){f.isMobileNavVisible()?h():s()}function c(n,t){typeof t=="undefined"&&(t=!0);y();v(n);n.parent&&(n.parent.childIsActive(!0),n.parent.isActive(!0));n.isDropDown&&n.parent.childIsActive(!0);f.activeMenuViewModel=n;f.activeMenuViewModel.isOpeningInNewTab||n.isActive(!0);t&&n.navigate()}function v(n){var t=f.userLinks().concat(f.systemLinks());n.isDropDown||n.isChild||ko.utils.arrayForEach(t,function(n){n.isActive(!1)});ko.utils.arrayForEach(t,function(n){n.isDropDown||n.isActive(!1)})}function y(){var n=f.userLinks().concat(f.systemLinks());$.each(n,function(n,t){$.each(t.children(),function(n,t){t.isActive(!1)})})}function p(n){e(n);f.userLinks.push(n)}function w(n){e(n);f.systemLinks.push(n)}function b(n){ko.utils.arrayForEach(n,function(n){e(n)});f.systemLinks(n)}function k(n){ko.utils.arrayForEach(n,function(n){e(n)});f.staticLinks(n)}function d(){var n=f.userLinks().concat(f.systemLinks()),t=ko.utils.arrayFirst(n,function(n){return n.id()===f.selectedDropDownId()});t.isActive(!1);f.isSubNavVisible(!1);f.selectedDropDownName("");f.selectedDropDownId(-1);f.systemLinks()[0].childIsActive(!1);f.staticLinks()[0].childIsActive(!1)}function o(n,t){function u(n){return!!ko.utils.arrayFirst(f.userLinks(),function(t){return t.id()===n})}var i=n.id(),r;typeof n.name=="function"?(f.selectedDropDownName(n.name()),n.name.subscribe(function(n){f.selectedDropDownName(n)})):f.selectedDropDownName(n.name);f.selectedDropDownId(n.id());r=f.systemLinks().concat(f.userLinks(),f.staticLinks());u(i)&&f.isMobileNavVisible(!0);ko.utils.arrayForEach(r,function(n){var r=n.id()===i;r&&n.isDropDown?(n.isActive()?n.childIsActive(!0):(n.isActive(!1),t||(f.staticLinks().forEach(function(n){n.isDropDown||n.isSubNavVisible(!n.isSubNavVisible())}),f.systemLinks().forEach(function(n){n.isDropDown||n.isSubNavVisible(!n.isSubNavVisible())}))),f.subLinks(n.children())):r?(f.subLinks([]),f.isSubNavVisible(!1)):n.isDropDown&&(n.isActive(!1),n.isSubNavVisible(!1))})}function g(n){f.selectedOrganization(n);f.changeOrganizationCallback(n.id)}function e(n){n.setId(f.index);f.index++}function l(){return typeof f.activeMenuViewModel=="undefined"?!0:f.activeMenuViewModel.canNavigateAway()}var f=this;return f.applicationImageUrl=ko.observable(n),f.applicationImageAltText=ko.observable(""),f.applicationImageWidth=ko.observable(r),f.hogiaLogoUrl=ko.observable(t),f.applicationName=ko.observable(i),f.userLinks=ko.observableArray([]),f.systemLinks=ko.observableArray([]),f.staticLinks=ko.observableArray([]),f.breadcrumbs=ko.observableArray([]),f.subLinks=ko.observableArray([]),f.organizations=ko.observableArray([]),f.selectedOrganization=ko.observable(""),f.isSubNavVisible=ko.observable(!1),f.subNavMarginLeft=ko.observable(""),f.isSelectOrganizationVisible=ko.observable(!1),f.isSelectOrganizationPossible=ko.observable(!0),f.changeOrganizationCallback=u,f.isMobileNavVisible=ko.observable(!0),f.activeMenuViewModel,f.selectedDropDownName=ko.observable(""),f.selectedDropDownId=ko.observable(),f.index=0,f.navigate=function(n,t){typeof t=="undefined"&&(t=!0);var i=ko.utils.arrayFirst(f.systemLinks().concat(f.staticLinks()),function(t){return n==t.id()});if(i.children().length>0){o(i);return}l()&&(ko.utils.arrayForEach(f.systemLinks().concat(f.staticLinks()),function(n){n.subNavHidden();n.isActive(!1);f.isSubNavVisible(!1)}),c(i,t))},f.navigateSubMenu=function(n,t){(ko.utils.arrayForEach(f.systemLinks().concat(f.staticLinks()),function(n){n.subNavHidden();n.isActive(!1);f.isSubNavVisible(!1)}),typeof t=="undefined"&&(t=!0),l())&&(f.isSubNavVisible()||o(n.parent,n),c(n,t))},f.allSubLinks=function(){var n=[];return ko.utils.arrayForEach(f.systemLinks(),function(t){ko.utils.arrayForEach(t.children(),function(t){n.push(t)})}),ko.utils.arrayForEach(f.userLinks(),function(t){ko.utils.arrayForEach(t.children(),function(t){n.push(t)})}),n},f.navigated=function(){var n=f.systemLinks().concat(f.userLinks(),f.staticLinks());$.each(n,function(n,t){if(t.isActive(!1),t.isCurrentUrl()){f.navigate(t.id(),!1);return}});$.each(f.allSubLinks(),function(n,t){t.isCurrentUrl()&&f.navigateSubMenu(t,!1)})},{navigated:f.navigated,applicationImageUrl:f.applicationImageUrl,applicationImageAltText:f.applicationImageAltText,applicationName:f.applicationName,hogiaLogoUrl:f.hogiaLogoUrl,userLinks:f.userLinks,systemLinks:f.systemLinks,staticLinks:f.staticLinks,subLinks:f.subLinks,allSubLinks:f.allSubLinks,breadcrumbs:f.breadcrumbs,organizations:f.organizations,selectedOrganization:f.selectedOrganization,isSubNavVisible:f.isSubNavVisible,isSelectOrganizationVisible:f.isSelectOrganizationVisible,isSelectOrganizationPossible:f.isSelectOrganizationPossible,addUserLink:p,addSystemLink:w,setSystemLinks:b,setStaticLinks:k,showSubNavigation:o,setSelectOrganization:g,navigate:f.navigate,navigateSubMenu:f.navigateSubMenu,subNavMarginLeft:f.subNavMarginLeft,applicationImageWidth:f.applicationImageWidth,toggleMobileNav:a,mobileNavVisible:s,mobileNavHidden:h,isMobileNavVisible:f.isMobileNavVisible,selectedDropDownName:f.selectedDropDownName,hideSubNavigation:d}};HogiaBootstrap.MenuModel=function(n){function r(n){t.id(n)}function u(n){t.name(n)}function f(n){t.url(n)}function e(n){t.navigateCallback=n}function o(n){this.isDropDown=!0;n.isChild=!0;n.parent=t;t.children.push(n)}function s(){t.isSubNavVisible(!0)}function h(){t.isSubNavVisible(!1)}var i=new HogiaBootstrap.MenuModelSettings,t;return $.extend(i,n),t=this,t.navigateCallback=i.navigateCallback,t.name=typeof i.name=="function"?i.name:ko.observable(i.name),t.email=typeof i.email=="function"?i.email:ko.observable(i.email),t.icon=ko.observable(i.icon),t.subMenuAlignRight=i.subMenuAlignRight,t.canNavigateAway=i.canNavigateAwayCallback,t.isCurrentUrl=i.isCurrentUrl,t.isOpeningInNewTab=i.isOpeningInNewTab,t.isSubNavVisible=ko.observable(!1),t.children=ko.observableArray([]),t.id=ko.observable(""),t.isActive=ko.observable(!1),t.isDropDown=!1,t.isChild=!1,t.url=i.url,t.parent=null,t.childIsActive=ko.observable(!1),t.hasIcon=new ko.computed(function(){return!!t.icon()}),t.hasChildren=new ko.computed(function(){return t.children().length>0}),t.navigate=function(){t.navigateCallback(t)},{id:t.id,name:t.name,email:t.email,url:t.url,icon:t.icon,subMenuAlignRight:t.subMenuAlignRight,children:t.children,isSubNavVisible:t.isSubNavVisible,hasIcon:t.hasIcon,hasChildren:t.hasChildren,setId:r,setName:u,setUrl:f,setNavigateCallback:e,addChildren:o,subNavVisible:s,subNavHidden:h,navigateCallback:t.navigateCallback,navigate:t.navigate,isActive:t.isActive,canNavigateAway:t.canNavigateAway,isDropDown:t.isDropDown,isChild:t.isChild,isCurrentUrl:t.isCurrentUrl,parent:t.parent,childIsActive:t.childIsActive,isOpeningInNewTab:t.isOpeningInNewTab}};HogiaBootstrap.OrganizationModel=function(n,t){var i=this;return i.id=n,i.name=t,{id:i.id,name:i.name}};HogiaBootstrap.BreadcrumbModel=function(n){var t=this;return t.name=n.name,t.url=n.url,t.isActive=n.isActive,t.icon=n.icon,t.hasIcon=new ko.computed(function(){return!!t.icon}),t.index=n.index,{name:t.name,url:t.url,isActive:t.isActive,icon:t.icon,hasIcon:t.hasIcon,index:t.index}};HogiaBootstrap.MenuModelSettings=function(){var n=this;return n.name="placeholder",n.email="",n.navigateCallback=function(){},n.icon="",n.url=ko.observable(""),n.subMenuAlignRight=!1,n.canNavigateAwayCallback=function(){return!0},n.isOpeningInNewTab=!1,n.isCurrentUrl=function(){function i(){return n.indexOf("?")>0}var n=this.url(),t=i()?n.substring(0,n.indexOf("?")):n;return n===location.href||n.length>0&&t===location.href},{name:n.name,email:n.email,navigateCallback:n.navigateCallback,icon:n.icon,url:n.url,subMenuAlignRight:n.subMenuAlignRight,canNavigateAwayCallback:n.canNavigateAwayCallback,isCurrentUrl:n.isCurrentUrl,isOpeningInNewTab:n.isOpeningInNewTab}};$(function(){ko.bindingHandlers.setSubMenuLeftMargin={init:function(){},update:function(n,t,i,r,u){var e=t(),o=$(n),s=e(),f;s&&(f=o.offset().left,u.$parent.subNavMarginLeft(f.toString()+"px"))}}});
//# sourceMappingURL=toolbar.min.js.map
